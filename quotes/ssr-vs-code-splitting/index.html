<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>StackOverflow 精选 - SSR vs Code Splitting - Matt's Home</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content><meta property="og:title" content="StackOverflow 精选 - SSR vs Code Splitting"><meta property="og:description" content="原文地址 The pros and cons of react ssr with code splitting and now React.Lazy I am slightly confused about the merits of ssr and code splitting and and code splitting done solely on the client. My thoughts are that server rendering the page first will lead to"><meta property="og:type" content="article"><meta property="og:url" content="/quotes/ssr-vs-code-splitting/"><meta property="article:published_time" content="2019-07-12T15:08:20+08:00"><meta property="article:modified_time" content="2019-07-12T15:08:20+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="StackOverflow 精选 - SSR vs Code Splitting"><meta name=twitter:description content="原文地址 The pros and cons of react ssr with code splitting and now React.Lazy I am slightly confused about the merits of ssr and code splitting and and code splitting done solely on the client. My thoughts are that server rendering the page first will lead to"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title="Matt's Home" rel=home><div class=logo__title>Matt's Home</div><div class=logo__tagline>无产阶级工人/Coder 🔨</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/aboutsite/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/about/aboutme/><span class=menu__text>About Me</span></a></li><li class=menu__item><a class=menu__link href=https://github.com/yuqingc/yuqingc.github.io><span class=menu__text>Edit this page</span></a></li><li class=menu__item><a class=menu__link href=https://github.com/yuqingc/yuqingc.github.io/issues><span class=menu__text>Feedback</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>StackOverflow 精选 - SSR vs Code Splitting</h1><p class=post__lead>为什么有 WebPack 的 CodeSplitting 还需要 SSR？</p><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-07-12T15:08:20>July 12, 2019</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/quotes/ rel=category>quotes</a></span></div></div></header><div class="content post__content clearfix"><p><a href=https://stackoverflow.com/questions/53071053/the-pros-and-const-of-react-ssr-with-code-splitting-and-now-react-lazy><em>原文地址</em></a></p><h2 id=the-pros-and-cons-of-react-ssr-with-code-splitting-and-now-reactlazy>The pros and cons of react ssr with code splitting and now React.Lazy</h2><p>I am slightly confused about the merits of ssr and code splitting and and code splitting done solely on the client.</p><p>My thoughts are that server rendering the page first will lead to a better experience without all the javascript having to be parsed and then server rendered.</p><p>I am confused how code splitting fits into the ssr model, is it that ssr renders the first hit and then code splitting is done thereafter on the client?</p><p>React.Lazy makes a point of saying react.client is all done on the client. How would it differ from code splitting on the server. Is that if you go to a specific route then you retrieve that chunk for the first render?</p><p>I understand React.Lazy is all done on the clientside and they have made a real point of saying that. How would it differ if it was done on the server.</p><p>Is there any real benefit to ssr with code splitting. Does it not just add complexity?</p><hr><h2 id=tldr>tl;dr</h2><p>Depending on your usecase you may use only SSR, only code-splitting or combine both as needed.</p><h2 id=merits-of-ssr>Merits of SSR</h2><ol><li><p><strong>Better SEO</strong> since search bots have markup to work with (and not necessarily dependent on executing javascript) for indexing.</p></li><li><p><strong>Faster initial render</strong> since markup is sent from the server, the browser doesn&rsquo;t has to wait on executing the javascript to render it. (Although the markup will still lack interactivity till react is hydrated client side).</p></li><li><p><strong>Deliver critical CSS first.</strong> The critical CSS for the initial page render can be in-lined, better UX since the loaded markup will already have styles ready.</p></li><li><p><strong>Simpler route splitting.</strong> SSR imo makes it simpler to reason about route splitting your application. For example, you may have different pages for <code>/about</code> and <code>/home</code> which you can route split to reduce bundle size (and preload other routes on client side if needed).</p></li></ol><h2 id=combining-code-splitting-your-components-and-ssr>Combining code splitting your components and SSR</h2><p>It might not be necessary to server render your entire page. For example, consider your homepage (which you wish to server render) includes a <code>Chat</code> component so users can directly ask you questions.</p><p>If this component is big you may decide to not server render it so the user can get the most important bits of the page first. This would reduce your initial page load by code splitting this component in your homepage component.</p><p>When the browser has parsed the markup it would load your Chat component after the main bundle. This way you could identify and keep your bundle sizes in check.</p><h2 id=only-using-code-splitting>Only using code splitting</h2><p>This is a perfectly fine way to build your application imo if you are not interested in the benefits of SSR.</p><p>For example, if your application is a user dashboard for authenticated users, it might be better to not worry about SSR at all and just code split your application. Also note that server rendering your application will take more time to send response on server (instead of plain REST APIs) since the markup has to be generated.</p><p>Coming to your questions:</p><blockquote><p>I am confused how code splitting fits into the ssr model, is it that ssr renders the first hit and then code splitting is done thereafter on the client?</p></blockquote><p>Yes, kinda. The browser receives the initial load from server, after that client takes care of loading the necessary bits. Now, you may decide to preload your components server side and send everything as well (please check <code>react-loadable</code> which I mention at the end of this answer).</p><blockquote><p>How would it differ from code splitting on the server. Is that if you go to a specific route then you retrieve that chunk for the first render?</p></blockquote><p><code>lazy</code> is just a cleaner API with support for Suspense for code-splitting. Ideally, when loading a route for the first time you would server render the initial markup and then let the client take care of loading next bits and routing. Imo <a href=https://nextjs.org/>Next.js</a> does this really well.</p><blockquote><p>How would it differ if it was done on the server.</p></blockquote><p>You may preload all your components or only the necessary bits. Please check the <strong>Combining code splitting your components and SSR</strong> section.</p><blockquote><p>Is there any real benefit to ssr with code splitting. Does it not just add complexity?</p></blockquote><p>Everything has its own trade-off here imo. As I mention in the <strong>Only using code splitting</strong> section, its perfectly fine to just use code-splitting if your use case doesn&rsquo;t require the merits of SSR.</p><blockquote><p><strong>Note</strong>
Currently <code>lazy</code> (in React v16.6.1) doesn&rsquo;t support SSR completely. You might want to check out <a href=https://github.com/jamiebuilds/react-loadable#------------server-side-rendering><code>react-loadable</code></a> to handle the cases where you wish to preload components server side.</p></blockquote></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/javascript/ rel=tag>javascript</a></li><li class=tags__item><a class="tags__link btn" href=/tags/react/ rel=tag>react</a></li><li class=tags__item><a class="tags__link btn" href=/tags/ssr/ rel=tag>ssr</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Matt avatar" src=/images/avatar.jpg class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About Matt</span></div><div class=authorbox__description>当我和世界初相见 当我曾经是少年</div></div><script src=https://utteranc.es/client.js repo=yuqingc/yuqingc.github.io issue-term=pathname label=comments theme=github-light crossorigin=anonymous async></script></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/posts/others/github-actions/>了解一下 GitHub Actions</a></li><li class=widget__item><a class=widget__link href=/posts/go/go-module-tutorial/>使用 Go Modules</a></li><li class=widget__item><a class=widget__link href=/posts/cheatsheets/http-cheatsheet/>Cheatsheet 系列 之 HTTP（一）</a></li><li class=widget__item><a class=widget__link href=/posts/flutter/flutter-starter/>Flutter 防坑日记</a></li><li class=widget__item><a class=widget__link href=/posts/others/yi/>☯️ 周易筮算</a></li><li class=widget__item><a class=widget__link href=/posts/others/clean-code/>代码看起来越“干净”越好？？？</a></li><li class=widget__item><a class=widget__link href=/posts/js/sse-express/>使用 Node.js 实现一个简单的 SSE 服务</a></li><li class=widget__item><a class=widget__link href=/posts/js/new-of-es2020/>What's New in ECMAScript 2020 (ES11)</a></li><li class=widget__item><a class=widget__link href=/posts/js/data-bindings-react-vue/>Thoughts of Data Bindings Strategies in React and Vue</a></li><li class=widget__item><a class=widget__link href=/posts/js/snippets01/>Useful JavaScript Snippets</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/about/>about</a></li><li class=widget__item><a class=widget__link href=/categories/blogs/>blogs</a></li><li class=widget__item><a class=widget__link href=/categories/music/>music</a></li><li class=widget__item><a class=widget__link href=/categories/notes/>notes</a></li><li class=widget__item><a class=widget__link href=/categories/quotes/>quotes</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/cheatsheet/ title=cheatsheet>cheatsheet (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/flutter/ title=flutter>flutter (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/go/ title=go>go (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/http/ title=http>http (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/javascript/ title=javascript>javascript (7)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=linux>linux (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/manjaro/ title=manjaro>manjaro (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/music/ title=music>music (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/profile/ title=profile>profile (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/react/ title=react>react (4)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ssr/ title=ssr>ssr (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/vue/ title=vue>vue (1)</a></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">Social</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/yuqingc target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg><span>GitHub</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Email href=mailto:mr.chenyuqing@live.com><svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg><span>mr.chenyuqing@live.com</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title="(゜-゜)つロ 干杯~" rel="noopener noreferrer" href=https://space.bilibili.com/76849204 target=_blank><svg t="1575645314188" class="widget-social__link-icon icon" width="24" height="24" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M777.514667 131.669333a53.333333 53.333333.0 010 75.434667L728.746667 255.829333h49.92A160 160 0 01938.666667 415.872v320a160 160 0 01-160 160H245.333333A160 160 0 0185.333333 735.872v-320a160 160 0 01160-160h49.749334L246.4 207.146667a53.333333 53.333333.0 1175.392-75.434667l113.152 113.152c3.370667 3.370667 6.186667 7.04 8.448 10.965333H580.48c2.261333-3.925333 5.12-7.68 8.490667-11.008l113.109333-113.152a53.333333 53.333333.0 0175.434667.0zm1.152 231.253334H245.333333a53.333333 53.333333.0 00-53.205333 49.365333l-.128 4.010667v320c0 28.117333 21.76 51.157333 49.365333 53.162666l3.968.170667h533.333334a53.333333 53.333333.0 0053.205333-49.365333l.128-3.968v-320c0-29.44-23.893333-53.333333-53.333333-53.333334zm-426.666667 106.666666c29.44.0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333.0 11-106.666666.0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334zm320 0c29.44.0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333.0 11-106.666666.0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z"/></svg><span>(゜-゜)つロ 干杯~</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2020 yuqingc.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>